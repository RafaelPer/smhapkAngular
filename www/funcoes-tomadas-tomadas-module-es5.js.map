{"version":3,"sources":["webpack:///src/app/funcoes/tomadas/tomadas.page.html","webpack:///src/app/funcoes/tomadas/tomadas-routing.module.ts","webpack:///src/app/funcoes/tomadas/tomadas.module.ts","webpack:///src/app/funcoes/tomadas/tomadas.page.scss","webpack:///src/app/funcoes/tomadas/tomadas.page.ts"],"names":["routes","path","component","TomadasPageRoutingModule","imports","forChild","exports","TomadasPageModule","declarations","TomadasPage","toastController","auth","alertCtrl","storage","apiService","isSubmitted","token","user","idUser","comodo","getUser","console","log","getIdUser","getToken","userID","id","getCom","idMongo","nomCom","putComodoByIDComodoMongoSQLite","subscribe","response","err","error","message","create","header","buttons","alert","present","getByUserIDMongoDB","idCom","postComodoSQLite","existTble","r","indexOf","alterComSQLite","erro","errors","messages","teste","e","push","m","msg","duration","color","toast","isSync","event","nomeCom","detail","value","statusTomadas","t","statusTomadaComodo","putComodoByIDMongDB","te","IDMongodbComodo","insertOrUpdateComSQLite","presentToast","selector","template"],"mappings":"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","file":"funcoes-tomadas-tomadas-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>TOMADAS</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  \\n  <ion-card *ngFor=\\\"let com of comodo\\\">\\n    <ion-card-header color=\\\"danger\\\">\\n      <ion-card-title>Comodo: {{com.nomeComodo}}</ion-card-title>\\n      <ion-card-subtitle>Tomadas do Comodo</ion-card-subtitle>\\n    </ion-card-header>\\n  \\n    <ion-card-content>\\n      <ion-item color=\\\"transp\\\" lines=\\\"none\\\">\\n        <ion-button [color]=\\\"com.isActive ? 'success' : 'dark'\\\" slot=\\\"end\\\" disabled><ion-icon [name]=\\\"com.isActive ? 'checkmark-circle-outline' : 'close-circle-outline'\\\"></ion-icon>&nbsp; {{com.isActive ? 'Atvio' : 'Desativado'}}</ion-button>\\n      </ion-item>\\n      <ion-item color=\\\"transp\\\" lines=\\\"none\\\">\\n        <ion-button [color]=\\\"com.issync ? 'success' : 'dark'\\\" slot=\\\"end\\\" disabled><ion-icon [name]=\\\"com.issync ? 'checkmark-circle-outline' : 'close-circle-outline'\\\"></ion-icon>&nbsp; {{com.issync ? 'Sincronizado' : 'NÃ£o Sincronizado'}}</ion-button>\\n      </ion-item>\\n      <ion-item color=\\\"transp\\\" lines=\\\"none\\\">\\n        <ion-button [color]=\\\"com.isFavorite ? 'success' : 'dark'\\\" slot=\\\"end\\\" disabled><ion-icon [name]=\\\"com.isFavorite ? 'checkmark-circle-outline' : 'close-circle-outline'\\\"></ion-icon>&nbsp; {{com.isFavorite ? 'Favorito' : 'NÃ£o Favorito'}}</ion-button>\\n      </ion-item>\\n\\n      <ion-radio-group  [value]=\\\"com.statusTomadaComodo ? 'on' : 'off'\\\" (ionChange)=\\\"changeTomadasButton(com.issync, com._id, $event, com.nomeComodo)\\\">\\n\\n        <ion-item>\\n          <ion-label>LIGADO</ion-label>\\n          <ion-radio slot=\\\"start\\\" value=\\\"on\\\" color=\\\"success\\\"></ion-radio>\\n          <ion-icon slot=\\\"start\\\" name=\\\"flash-outline\\\" color=\\\"danger\\\"></ion-icon>\\n        </ion-item>\\n      \\n        <ion-item>\\n          <ion-label>DESLIGADO</ion-label>\\n          <ion-radio slot=\\\"start\\\" value=\\\"off\\\" color=\\\"danger\\\"></ion-radio>\\n          <ion-icon slot=\\\"start\\\" name=\\\"flash-off-outline\\\" color=\\\"danger\\\"></ion-icon>\\n        </ion-item>\\n\\n      </ion-radio-group>\\n    </ion-card-content>\\n  </ion-card>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TomadasPage } from './tomadas.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TomadasPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TomadasPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TomadasPageRoutingModule } from './tomadas-routing.module';\n\nimport { TomadasPage } from './tomadas.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TomadasPageRoutingModule\n  ],\n  declarations: [TomadasPage]\n})\nexport class TomadasPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Z1bmNvZXMvdG9tYWRhcy90b21hZGFzLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { ComodoService } from '../../services/comodo.service';\nimport { AuthenticationService } from '../../services/authentication.service';\nimport { SecureStoreService } from '../../services/storageL.service';\nimport { AlertController, ToastController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-tomadas',\n  templateUrl: './tomadas.page.html',\n  styleUrls: ['./tomadas.page.scss'],\n})\nexport class TomadasPage implements OnInit {\n    // alterCm: FormGroup;\n    isSubmitted = false;\n    // id: any;\n    comodo: any;\n    token = null;\n    // isActiveValue: any = null;\n    // isSyncValue: any = null;\n    // isFavoriteValue: any = null;\n    //responseInsertSQLite: any = null;\n    userID: any;\n    user = null;\n    idUser = null;\n    // tempAjust: any = null;\n    // arCondStatus: any = null;\n    // luzesStatus: any = null;\n    // tomadasStatus: any = null;\n\n    constructor(public toastController: ToastController, private auth: AuthenticationService, private alertCtrl: AlertController, private storage: SecureStoreService, private apiService: ComodoService) { \n      this.comodo = [];\n    }\n\n    async ngOnInit() {\n      this.user = this.auth.getUser();\n      console.log(this.user);\n      this.idUser = await this.storage.getIdUser();\n      console.log(this.idUser);\n      this.token = await this.storage.getToken();\n      // this.token = [{token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVmMGEyYTRmYTFkODRmMTdhODkxZDVhOSIsImlhdCI6MTU5NTAyOTYwNSwiZXhwIjoxNjI2NjUyMDA1fQ.2kp-KLy6458Dq6zGgPsygBB_dyRws9BlqSNjbplyzOk'}];\n      console.log(this.token);\n      this.userID = this.user ? this.user.id : this.idUser[0].idUser;\n      // this.userID = '5f0a2a4fa1d84f17a891d5a9';\n      //console.log(this.token);\n      this.getCom(this.userID, this.token[0].token);\n    }\n  \n    async ionViewWillEnter() {\n      this.user = this.auth.getUser();\n      console.log(this.user);\n      this.idUser = await this.storage.getIdUser();\n      console.log(this.idUser);\n      this.token = await this.storage.getToken();\n      // this.token = [{token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVmMGEyYTRmYTFkODRmMTdhODkxZDVhOSIsImlhdCI6MTU5NTAyOTYwNSwiZXhwIjoxNjI2NjUyMDA1fQ.2kp-KLy6458Dq6zGgPsygBB_dyRws9BlqSNjbplyzOk'}];\n      console.log(this.token);\n      this.userID = this.user ? this.user.id : this.idUser[0].idUser;\n      // this.userID = '5f0a2a4fa1d84f17a891d5a9';\n      //console.log(this.token);\n      this.getCom(this.userID, this.token[0].token);\n    }\n\n    alterComSQLite(idMongo, comodo, token, nomCom){\n      this.apiService.putComodoByIDComodoMongoSQLite(idMongo, comodo, token).subscribe((response) => {\n        console.log(response);\n      }, async (err) => {\n        console.log(err);\n        let error = err.error ? err.error.message : err.message;\n        const alert = await this.alertCtrl.create({\n          header: 'Falha em atualizar o comodo ' + nomCom + ' com o id: ' + idMongo + ' na base local',\n          message: 'Erro: ' + error,\n          buttons: ['OK']\n        });\n        await alert.present();\n      });\n    }\n  \n    getCom(userID, token){\n      this.apiService.getByUserIDMongoDB(userID, token).subscribe( async (response) => {\n        console.log(response);\n        this.comodo = response;\n      }, async (err) => {\n        console.log(err);\n        // this.presentToast(err.error.message);\n        let error = err.error ? err.error.message : err.message;\n        const alert = await this.alertCtrl.create({\n          header: 'Falha em buscar o comodo',\n          message: 'Erro: ' + error,\n          buttons: ['OK']\n        });\n        await alert.present();\n      });\n    }\n  \n    insertOrUpdateComSQLite(idCom, comodo, token, nomCom){\n      this.apiService.postComodoSQLite(comodo, token).subscribe( async (response) => {\n        console.log(response);\n        let existTble = false;\n        for(let r of response.message){\n          console.log(r);\n          // if(r.message.indexOf('Coluna ja Existe na base do servidor, Sincronizado com sucesso')){\n          if(r.message.indexOf('Existe')){\n            existTble = true;\n            break;\n          }\n        }\n        console.log(existTble);\n        if(existTble){\n          this.alterComSQLite(idCom, comodo, token, nomCom);\n        }\n      }, async (err) => {\n        console.log(err);\n        let erro = err.message;\n        let errors = err.error.errors;\n        let messages = err.error.message;\n        let teste = [];\n        console.log(errors);\n        console.log(messages);\n  \n        if(errors){\n          for(let e of errors){\n            console.log(e.message);\n            teste.push(e.message);\n          }\n        }\n  \n        if(messages){\n          for(let m of messages){\n            console.log(m);\n            teste.push(m.message);\n          }\n        }\n  \n        teste.push(erro);\n        console.log(teste);\n        const alert = await this.alertCtrl.create({\n          header: 'Falha em sincronizar o comodo ' + nomCom + ' com o id: ' + idCom + ' na base local',\n          message: 'Erro: ' + teste,\n          buttons: ['OK']\n        });\n        await alert.present();\n      });\n    }\n  \n    async presentToast(msg) {\n      const toast = await this.toastController.create({\n        message: msg,\n        duration: 2000,\n        color: 'danger'\n      });\n      return await toast.present();\n    }\n\n    changeTomadasButton(isSync, idCom, event, nomeCom){\n      console.log('changeTomadasButton');\n      console.log(isSync);\n      console.log(idCom);\n      console.log(event);\n      console.log(event.detail.value);\n      console.log(nomeCom);\n      if (event.detail){\n        let value = event.detail.value;\n        let statusTomadas = null;\n        if(value === 'on'){\n          statusTomadas = true;\n        }\n        else if (value === 'off'){\n          statusTomadas = false;\n        }\n        let t = {\n          statusTomadaComodo: statusTomadas\n        };\n        console.log(t);\n        console.log(this.token);\n        console.log(this.userID);\n        this.apiService.putComodoByIDMongDB(idCom, t, this.token[0].token).subscribe((response) => {\n          console.log(response);\n          this.getCom(this.userID, this.token[0].token);\n          if(isSync){\n            let te ={\n              IDMongodbComodo: idCom,\n              statusTomadaComodo: statusTomadas\n            }\n            this.insertOrUpdateComSQLite(idCom, te, this.token[0].token, nomeCom);\n          }\n          else{\n            this.presentToast('SincronizaÃ§Ã£o do Comodo desativada, nÃ£o sincronizado');\n          }\n        },\n        async (err) => {\n          console.log(err);\n          let error = err.error ? err.error.message : err.message;\n          const alert = await this.alertCtrl.create({\n            header: 'Falha em atualizar o status das luzes do comodo ' + nomeCom + ' com o id: ' + idCom,\n            message: 'Erro: ' + error,\n            buttons: ['OK']\n          });\n          await alert.present();\n        });\n      }\n    }\n\n}\n"]}